<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

	<th:block layout:fragment="css">
		<!-- 필요시 추가 css 가능 -->
	</th:block>
	<div class="container mt-4">
		<div layout:fragment="content">

			<!-- layout.html 적용 코드 타 html에서 insert 할때 참고 -->
			<th:insert th:replace="~{layout}" />
			<!-- 우측 상단 고정 Toast 컨테이너 (id 부여) -->
			<div id="toastContainer"
				class="toast-container position-fixed top-0 end-0 p-3"></div>

			<h1 class="mb-4">Bootstrap 예제 버튼</h1>
			<button type="button" id="a1" class="btn btn-primary">Primary
				Button</button>
			<button type="button" class="btn btn-success" id="showToastBtn">Success
				Button</button>
			<button type="button" class="btn btn-danger">Danger Button</button>
			<hr>
			<p>아래는 Bootstrap의 카드 컴포넌트 예시입니다.</p>

			<!-- controller에서 타임립프로 데이터 노출을 위한 방법 -->
			<p th:text="${message}" />
			<p th:text="${user}" />

			<div class="card" style="width: 18rem;">
				<div class="card-body">
					<h5 class="card-title">카드 제목</h5>
					<p class="card-text">이 텍스트가 Bootstrap 카드 컴포넌트에 의해 꾸며집니다.</p>
					<a href="#" class="btn btn-secondary">카드 버튼</a>
				</div>
			</div>

			<!-- 모달 트리거 버튼 -->
			<button type="button" class="btn btn-primary" data-toggle="modal"
				data-target="#myModal">모달 열기</button>

			<!-- 모달 내용 -->
			<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
				aria-labelledby="myModalLabel" aria-hidden="true"
				data-backdrop="static">
				<div class="modal-dialog" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="myModalLabel">모달 제목</h5>
							<button type="button" class="close" data-dismiss="modal"
								aria-label="Close">
								<span aria-hidden="true">&times;</span>
							</button>
						</div>
						<div class="modal-body">
							모달 내용입니다.
							<p id="realtime" th:text="${today}" />
						</div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary"
								data-dismiss="modal">닫기</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
<script>
	$(document).ready(function() {
		$("#a1").click(function() {
			alert("Primary Button이 클릭되었습니다!");
			window.location.href = "/user";
		});
		
		/* $('#showAlertBtn').click(function() {
			if($('#showAlertBtn').hasClass("d-none")){
				alert('aa');
			}
			
			$('#successAlert').removeClass('d-none');
			setTimeout(function() {
				$('#successAlert').addClass('d-none');
			}, 2000);
		}); */
		
		$('#showToastBtn').on('click', function() {
		    // 유니크한 id 생성 (중복 방지)
		    var uniqueId = 'successToast_' + Date.now();
		    
		    // toast HTML 템플릿 생성
		    var toastHTML = `
		        <div id="${uniqueId}" class="toast align-items-center text-bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
		            <div class="d-flex">
		                <div class="toast-body">
		                    Bootstrap이 성공적으로 적용되었습니다!
		                </div>
		                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
		            </div>
		        </div>
		    `;
		    // toastContainer에 toast 요소 추가
		    $('#toastContainer').append(toastHTML);

		    // Bootstrap Toast 인스턴스 생성 및 show
		    var toastEl = document.getElementById(uniqueId);
		    var toast = new bootstrap.Toast(toastEl);
		    toast.show();

		    // 자동으로 사라진 후 DOM에서도 제거 (메모리 누수 방지)
		    $(toastEl).on('hidden.bs.toast', function () {
		        $(this).remove();
		    });
		});
	});

	// 1. 서버시간을 JS Date 객체로 변환
	let now = new Date(document.getElementById('realtime').textContent.replace(
			'T', ' '));

	// 2. 1초마다 시간 갱신
	setInterval(function() {
		now.setSeconds(now.getSeconds() + 1);
		document.getElementById('realtime').textContent = now.toLocaleString();
	}, 1000);
</script>
</html>